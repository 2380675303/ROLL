kloam:
  localizationMode: true
  saveKeyframeMap: true 
  savePCD: true
  savePose: true # for path recording purposes /reloc gt, save it to saveMapDirectory
  saveMapDirectory:  "/media/binpeng/BIGLUCK/Datasets/NCLT/datasets/2012-02-02/updated_map_surf_only/map_pcd"          
  saveKeyframeMapDirectory: "/media/binpeng/BIGLUCK/Datasets/NCLT/datasets/2012-02-02/updated_map_surf_only/keyframes"
  loadKeyframeMapDirectory:  "/media/binpeng/BIGLUCK/Datasets/NCLT/datasets/2012-01-08/GroundTruthMap/map_20120115_GT/keyframes"
  # saveKeyframeMapDirectory: "/media/binpeng/BIGLUCK/Datasets/NCLT/datasets/2012-01-08/Localization_update/updated_map_20120202/keyframes"
  mapUpdateEnabled: true
  saveMatchingError: true
  
  saveRawCloud: false

  # temporary mapping mode
  startTemporaryMappingErrorThre: 0.2 # if no serious map out-of-date, it suffice 99% of the time
  startTemporaryMappingInlierRatioThre: 0.4  
  slidingWindowSize: 30

  # For reloc: global variables
  mapLoaded: false
  relocSuccess: false
  useOdom: false  
  # initialGuess: [-0.023064531, 0.006521815, -0.123438711, 75.34987256, 108.1539385, -3.290657831] # 20120115
  # initialGuess: [-0.017984725855664, 0.012800135555456, -0.239421644654498,  75.520827533362393, 108.443935840162752, -3.291299069412723] # 20120202
  # initialGuess: [-0.076900630455742, -0.035044911386992, -0.003181013984940, -3.203045425982298, -10.919418970861985, 1.109503103575354] # 20120212
  # initialGuess: [0.020559761872303, -0.000903047757892, -1.070181276478803, 75.579787639477303, 108.841026421505774, -3.316757230658669] # 20120317
  # initialGuess: [0.019280939, 0.004926005, -1.755148225, -1.126196628, -3.182984251, 0.737359681] #20120511
  # initialGuess: [-0.006278876, -0.001990931, -0.460840165,76.08323025, 109.5430329, -3.29033493] # 20120928
  # initialGuess: [0.00468251, 0.028480667, -0.634307081, 76.50582407, 108.3137303, -3.255910821] # 20130422


  # Visualization
  globalMapVisualizationSearchRadius: 1000.0    # meters, global map visualization radius(index would overflow if too big)
  globalMapVisualizationPoseDensity: 10.0       # 10 by default, meters, global map visualization keyframe density
  globalMapVisualizationLeafSize: 1.0           # 1 by default, meters, global map visualization cloud density

  mappingProcessInterval: 0.20                 #cannot do realtime!!! seconds, regulate mapping frequency
    # Surrounding map
  surroundingkeyframeAddingDistThreshold: 1.0   # 1.0 by default,meters, regulate keyframe adding threshold
  surroundingkeyframeAddingAngleThreshold: 0.2  # 0.2 by default,radians, regulate keyframe adding threshold
  surroundingKeyframeDensity: 2.0               # meters, downsample surrounding keyframe poses   
  surroundingKeyframeSearchRadius: 50.0         # 20 is not okay; meters, within n meters scan-to-map optimization (when loop closure disabled)
  # Topics
  pointCloudTopic: "velodyne_points"               # Point cloud data
  imuTopic: "imu/data"                         # IMU data
  # odomTopic: "odometry/imu"                   # IMU pre-preintegration odometry, same frequency as IMU
  odomTopic: odom
  gpsTopic: "odometry/gps"                    # GPS odometry topic from navsat, see module_navsat.launch file

  # Frames
  lidarFrame: "lidar_link"
  baselinkFrame: "base_link"
  odometryFrame: "odomLIO"
  mapFrame: "mapLIO"

  # GPS Settings
  useImuHeadingInitialization: false           # if using GPS data, set to "true"
  useGpsElevation: false                      # if GPS elevation is bad, set to "false"
  gpsCovThreshold: 2.0                        # m^2, threshold for using GPS data
  poseCovThreshold: 1.0                      # m^2, threshold for using GPS data

  # NCLT HDL-32: 
  sensor: velodyne                            # lidar sensor type, either 'velodyne' or 'ouster'
  N_SCAN: 32                                 ## number of lidar channel (i.e., 16, 32, 64, 128)
  Horizon_SCAN: 1800                          ## lidar horizontal resolution (Velodyne:1800, Ouster:512,1024,2048,robosense: 2000)
  downsampleRate: 1                            

  # LOAM feature threshold
  edgeThreshold: 0.1
  surfThreshold: 0.1
  edgeFeatureMinValidNum: 10
  surfFeatureMinValidNum: 100

  # voxel filter paprams
  odometrySurfLeafSize: 0.2                     # default: 0.4 - outdoor, 0.2 - indoor
  mappingCornerLeafSize: 0.2                    # default: 0.2 - outdoor, 0.1 - indoor
  mappingSurfLeafSize: 0.4                      # default: 0.4 - outdoor, 0.2 - indoor

  # CPU Params
  numberOfCores: 4                              # number of cores for mapping optimization
  # Loop closure
  loopClosureEnableFlag: true
  loopClosureFrequency: 1.0                    # Hz, regulate loop closure constraint add frequency
  surroundingKeyframeSize: 50                   # submap size (when loop closure enabled)
  historyKeyframeSearchRadius: 15.0             # meters, key frame that is within n meters from current pose will be considerd for loop closure
  historyKeyframeSearchTimeDiff: 30.0           # 30 by default,seconds, key frame that is n seconds older will be considered for loop closure
  historyKeyframeSearchNum: 25                  # number of hostory key frames will be fused into a submap for loop closure
  # 0.3 by default, but for indoor it can go wrong, actually mostly for good matches, fitnessScore is around 0.03 ;
  #icp threshold, the smaller the better alignment
  historyKeyframeFitnessScore: 0.2              

